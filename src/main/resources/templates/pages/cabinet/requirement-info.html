<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout.html}">
<head>
    <meta charset="utf-8">
    <title>РГАЛИ - требование</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link th:href="@{/css/storage-unit-list.css}" rel="stylesheet">
    <link th:href="@{/css/fund-card.css}" rel="stylesheet">
    <meta name="language" content="ru">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>

<main class="content" layout:fragment="content">
    <div class="content">
        <div class="content">
            <div class="b-indent_s_20"></div>
            <div class="article-title">
                <a>Личный кабинет</a>
            </div>
            <div class="b-indent_s_30"></div>
            <div class="tabs tabs-color">
                <input type="radio" name="tab-btn" id="tab-btn-1" value="" disabled="">
                <label onclick="location.href='/cabinet/user-info'" for="tab-btn-1">Данные пользователя</label>
                <input type="radio" name="tab-btn" id="tab-btn-2" value="" disabled="">
                <label onclick="location.href='/cabinet/change-password'" for="tab-btn-2">Смена пароля</label>
                <input type="radio" name="tab-btn" id="tab-btn-3" value="" checked="">
                <label onclick="location.href='/cabinet/requirements'" for="tab-btn-3">Требования</label>
                <div id="content-1"></div>
                <div id="content-2"></div>
                <div id="content-3">
                    <div class="tab-title">
                        <a>Просмотр требования</a>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-flex b-flex_align_between">
                        <div><a class="b-button-rgali-return" onclick="Previous()">
                            <div class="b-button__icon b-button__icon_mod_return_rgali"></div>
                            <div class="b-button__text">Вернуться</div></a>
                            <div class="b-indent_s_10"></div>
                        </div>
                        <div style="margin-right: 20px;" th:if="${ask.askStateName == 'Требование создано исследователем'}">
                            <a class="b-button-rgali" style="text-decoration: none" th:href="'/cabinet/requirements-close/' + ${askId}">
                                <div class="b-button__text">Отказаться от требования</div>
                            </a>
                        </div>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-form">
                        <label class="label-attrs-requirement">Номер требования</label>
                        <input class="input-attrs-requirement" th:value="${ask.askNum}" style="width: 250px;">
                        <label class="label-attrs-requirement" style="margin-left: 15px;">Дата подачи требования</label>
                        <div class="b-form">
                            <input class="input-attrs-requirement" th:value="${ask.requestDate}" style="width:85px" placeholder="    .    .    "><a class="b-form__icon b-form__icon_mod_calendar"></a>
                        </div>
                        <label class="label-attrs-requirement" style="margin-left: 40px;">Требуемая дата выдачи</label>
                        <div class="b-form">
                            <input class="input-attrs-requirement" th:value="${ask.askDate}"  style="width:85px" placeholder="    .    .    "><a class="b-form__icon b-form__icon_mod_calendar"></a>
                        </div>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-form">
                        <label class="label-attrs-requirement">Архивный шифр</label>
                        <input class="input-attrs-requirement" th:value="${ask.cypher}" value="Ф.10 Оп.1 Ед.хр.2" style="width: 250px;">
                        <label class="label-attrs-requirement1" style="margin-left: 15px; width:100px;">Количество листов</label>
                        <input class="input-attrs-requirement" th:value="${ask.numLists}" value="" style="width: 80px;">
                        <label class="label-attrs-requirement1" style="margin-left: 15px; width:150px;">Архивохранилище (поток)</label>
                        <input class="input-attrs-requirement" th:value="${ask.warehouseName}" value="" style="width: 363px;">
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-form b-form_align_top">
                        <label class="label-attrs-requirement">Заголовок единицы хранения</label>
                        <textarea class="b-form__area" th:text="${ask.headerDoc}" style="height:46px;width: 990px;">Письмо Карташевской Надежды Тимофеевны (по мужу Мосоловой, урожд. Аксаковой) Аксакову Тимофею Степановичу. С пометками неустановленного лица.</textarea>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-form">
                        <label class="label-attrs-requirement">Цель занятий</label>
                        <textarea class="b-form__area" th:text="${ask.purposeResearchName}" style="height:46px;width: 990px;">Письмо Карташевской Надежды Тимофеевны (по мужу Мосоловой, урожд. Аксаковой) Аксакову Тимофею Степановичу. С пометками неустановленного лица.</textarea>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-form">
                        <label class="label-attrs-requirement">Темы работы</label>
                        <textarea class="b-form__area" th:text="${ask.themename}" style="height:46px;width: 990px;">Письмо Карташевской Надежды Тимофеевны (по мужу Мосоловой, урожд. Аксаковой) Аксакову Тимофею Степановичу. С пометками неустановленного лица.</textarea>
                    </div>
                    <div class="b-indent_s_10"></div>
                    <div class="b-table b-table_mod_border b-table-attrs-requirements-list">
                        <div class="b-table__wrap">
                            <table class="b-table__table" style="width: 1150px;">
                                <thead class="b-table__head">
                                <tr class="b-table__row">
                                    <td class="b-table__cell" style="width:375px">
                                        <p class="b-table__text">Состояние требования</p>
                                    </td>
                                    <td class="b-table__cell" style="width:70px">
                                        <p class="b-table__text">Дата</p>
                                    </td>
                                    <td class="b-table__cell" style="width:70px">
                                        <p class="b-table__text">Время</p>
                                    </td>
                                    <td class="b-table__cell" style="width:375px">
                                        <p class="b-table__text">Примечание</p>
                                    </td>
                                </tr>
                                </thead>
                                <tbody class="b-table__body">
                                <tr th:each="askState : ${askStates}" class="b-table__row">
                                    <td class="b-table__cell">
                                        <p class="b-table__text" th:text="${askState.askStateName}">Создано исследователем</p>
                                    </td>
                                    <td class="b-table__cell b-table__cell_align_center">
                                        <p class="b-table__text" th:text="${askState.askStateDate}">01.04.21</p>
                                    </td>
                                    <td class="b-table__cell b-table__cell_align_center">
                                        <p class="b-table__text" th:text="${askState.askStateTime}">14:00:00</p>
                                    </td>
                                    <td class="b-table__cell">
                                        <p class="b-table__text" th:text="${askState.note}"></p>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="b-indent_s_10"></div>
                </div>
            </div>
        </div>
        <div class="b-indent_s_10"></div>
    </div>

    <script type="text/javascript" th:src="@{/js/main.js}"></script>

    <script type="text/javascript">
    $(document).ready(function() {

          $("#pagesPerPage").change(function() {
             $("#currentPage").html("1");
             changePage()
          });

          $("#selectWithSort").change(function() {
             $("#currentPage").html("1");
             changePage()
          });

          $(".b-pagination__item").click(function() {
             $("#currentPage").html($(this).text());
             changePage()
          });

          $(".b-pagination__prev").click(function() {
             $("#currentPage").html($("#previousPage").text());
             changePage()
          });

          $(".b-pagination__next").click(function() {
             $("#currentPage").html($("#nextPage").text());
             changePage()
          });
    });

    function changePage() {
        var link = '/cabinet/requirements?fieldForSort=' +  $("#selectWithSort").val() + '&elementsOnPage=' + $("#pagesPerPage").val() + '&currentPage=' + $("#currentPage").text()
        location.href = link
    }
    </script>
</main>

</body>
</html>